<!DOCTYPE html>
<html lang="vi">
<head>
    <meta name="google-site-verification" content="FdnCYxFJK7kpfi6Bmcs9i9T6_fKSnEobSmU6m8vvekQ" />
    <meta name="description" content="Trang web ch√∫c m·ª´ng sinh nh·∫≠t d√†nh cho TianYi - K·ª∑ ni·ªám v√† nh·ªØng l·ªùi ch√∫c t·ªët ƒë·∫πp nh·∫•t.">
    <meta name="keywords" content="Ch√∫c m·ª´ng sinh nh·∫≠t, Happy Birthday TianYi, qu√† t·∫∑ng sinh nh·∫≠t">
    <meta name="robots" content="index, follow">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
   (function(){
      emailjs.init("NFIAM8fKkC2122-KS"); // Thay b·∫±ng Public Key c·ªßa b·∫°n
   })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√∫c M·ª´ng Sinh Nh·∫≠t!</title>
    <style>
body {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: white;
    /* Thi·∫øt l·∫≠p n·ªÅn tr·ª±c ti·∫øp tr√™n body nh∆∞ng d√πng min-height */
    background: linear-gradient(180deg, #ff9cf3 0%, #d64ff5 15%, #1a013c 50%, #000 100%);
    background-attachment: scroll; /* ƒê·ªÉ m√†u tr√¥i theo khi l∆∞·ªõt */
    min-height: 100vh;
}

/* X√≥a b·ªè ho·∫∑c comment (v√¥ hi·ªáu h√≥a) ƒëo·∫°n body::before c≈© ƒëi */
/* body::before { ... } <- X√≥a ƒëo·∫°n n√†y n·∫øu c√≤n trong code */

.container {
    position: relative;
    z-index: 2;
    width: 90%;
    max-width: 800px;
    margin: 0 auto; /* B·ªè margin top 50px ƒë·ªÉ m√†u h·ªìng hi·ªán ngay t·ª´ ƒë·∫ßu */
    padding: 50px 20px;
    background: rgba(255, 255, 255, 0.05); /* Gi·∫£m ƒë·ªô m·ªù ƒë·ªÉ th·∫•y r√µ gradient */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px); 
    border-radius: 20px;
}
#starfield { 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    z-index: -1; 
    pointer-events: none;
}

img {
    max-width: 100%;
    height: auto;
    border-radius: 10px;
}
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle, #1b1d2e 0%, #000 100%); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        .modal { background:linear-gradient(45deg, #7209b7, #b5179e); backdrop-filter: blur(10px); padding: 30px; border-radius: 20px; width: 90%; max-width: 450px; text-align: center; border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 8px 32px rgba(0,0,0,0.5); }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: none; box-sizing: border-box; background: rgba(255,255,255,0.9); }
        button { background: linear-gradient(45deg, #b5179e, #7209b7); color: rgb(243, 242, 242); border: none; padding: 12px 25px; border-radius: 25px; cursor: pointer; font-weight: bold; margin-top: 10px; transition: 0.3s; }
        button:hover { transform: scale(1.05); box-shadow: 0 0 15px #af279b; }
        #main-content { display: none; padding-top: 50px; }
        .story-item { margin: 80px 0; opacity: 0; transform: translateY(50px); transition: all 1s ease-out; }
        .story-item.show { opacity: 1; transform: translateY(0); }
        .story-img { width: 100%; max-width: 500px; border-radius: 15px; border: 5px solid white; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .story-note { font-style: italic; color: #ffca3a; margin-top: 15px; font-size: 1.1rem; line-height: 1.6; }
        .gift-container { display: flex; justify-content: center; flex-wrap: wrap; gap: 30px; margin: 50px 0; }
        .gift-box { cursor: pointer; transition: 0.3s; width: 120px; }
        .gift-box img { width: 80px; filter: drop-shadow(0 0 10px #fff); }
        #universe-section { background: rgba(8, 4, 87, 0.915); padding: 50px 20px; border-radius: 50px 50px 0 0; margin-top: 50px; }
        #wish-input {
    width: 100%;
    max-width: 500px;
    height: 200px;
    background: #fdfcf0; /* M√†u gi·∫•y h∆°i v√†ng c≈© */
    background-image: linear-gradient(#e1e1e1 1px, transparent 1px); /* T·∫°o d√≤ng k·∫ª */
    background-size: 100% 1.5rem;
    line-height: 1.5rem;
    padding: 10px 10px 10px 40px;
    border: none;
    border-left: 2px solid #ffadad; /* ƒê∆∞·ªùng k·∫ª l·ªÅ ƒë·ªè */
    border-radius: 5px;
    color: #333; /* Ch·ªØ m√†u t·ªëi cho d·ªÖ ƒë·ªçc tr√™n gi·∫•y */
    font-family: 'Courier New', Courier, monospace; /* Font ch·ªØ ki·ªÉu ƒë√°nh m√°y */
    box-shadow: 5px 5px 15px rgba(0,0,0,0.5);
    resize: none;
}
        .send-btn { background: linear-gradient(45deg, #f440d3, #4cc9f0); padding: 15px 40px; font-size: 1.1rem; }
    /* Hi·ªáu ·ª©ng h·ªôp qu√† b√≠ ·∫©n */
.mystery-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
}

.mystery-box {
    width: 80px;
    height: 80px;
    background: linear-gradient(45deg, #ffca3a, #ff922b);
    border-radius: 15px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    cursor: pointer;
    transition: 0.5s;
    box-shadow: 0 5px 15px rgba(255, 202, 58, 0.4);
}

.mystery-box:hover {
    transform: translateY(-10px) rotate(10px);
}

/* Giao di·ªán chi·∫øc v√© Voucher */
#voucher-result {
    display: none;
    margin-top: 30px;
    padding: 20px;
    background: white;
    color: #333;
    border: 2px dashed #ff40d3;
    border-radius: 15px;
    position: relative;
    animation: zoomIn 0.5s ease;
}

#voucher-result::before, #voucher-result::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    background: #080457; /* Tr√πng v·ªõi m√†u n·ªÅn universe-section */
    border-radius: 50%;
    top: 50%;
    transform: translateY(-50%);
}

#voucher-result::before { left: -12px; }
#voucher-result::after { right: -12px; }

@keyframes zoomIn {
    from { transform: scale(0); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}
#retry-question-area {
    display: none;
    margin-top: 20px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    border: 1px solid #ffca3a;
}
.re-btn {
    background: #666;
    font-size: 0.8rem;
    padding: 8px 15px;
    margin-top: 10px;
}
    </style>
</head>
<body>
    <canvas id="starfield"></canvas>
    <audio id="bg-music" src="nhac_nen.mp3" loop></audio>
    <div id="overlay">
        <div class="modal" id="step1">
         <h2>Ayoo, ai ƒë√¢y? ‚ú®</h2>
         <p>ƒê·ªÉ coi ƒë∆∞·ª£c nh·ªØng ƒëi·ªÅu b·∫•t ng·ªù ti·∫øp theo th√¨ ph·∫£i nghe theo s·ª± s·∫Øp x·∫øp c·ªßa ta</p>
         <div style="display: flex; gap: 10px; justify-content: center;">
         <button onclick="showForm()">G√©t g√¥</button>
         <button onclick="noOption()" style="background: #666;">H√¥ng b√© ∆°i</button>
        </div>
</div>
        <div class="modal" id="step2" style="display:none;">
            <h3>X√°c minh ch√≠nh ch·ªß üéÇ</h3>
            <div style="display: flex; gap: 5px; justify-content: center; margin-top: 10px;">
                <select id="dob-day" style="width: 30%; padding: 10px; border-radius: 8px;"></select>
                <select id="dob-month" style="width: 35%; padding: 10px; border-radius: 8px;"></select>
                <select id="dob-year" style="width: 35%; padding: 10px; border-radius: 8px;"></select>
            </div>
            <p style="font-size: 0.8rem; color: #aaa;">(Ng√†y m√† thi√™n th·∫ßn r∆°i xu·ªëng ƒë√¢y l√†?)</p>
            <input type="number" id="input-age" placeholder="C·∫≠u ƒë√£ bao nhi√™u n·ªìi b√°nh ch∆∞ng g√≤i">
            <textarea id="input-thought" placeholder="Vi·∫øt c·∫£m nghƒ© c·ªßa m√¨nh v·ªÅ ng√†y ƒë·∫∑c bi·ªát n√†y nh√≥e..."></textarea>
            <p id="error-msg" style="color: #ff4d4d; font-size: 0.8rem;"></p>
            <button onclick="checkValidation()">Check var</button>
        </div>
    </div>

    <div id="main-content">
        <div class="container">
            <div id="welcome-screen" style="display: none; padding: 100px 0;">
                <h1 style="font-size: 3.5rem; color: #ffca3a; text-shadow: 0 0 20px #ffca3a;">CH√öC M·ª™NG SINH NH·∫¨T! üéÇ</h1>
                <p style="font-size: 1.5rem;color:#7209b7;">V≈© tr·ª• ƒëang c√≥ m√≥n qu√† b·∫•t ng·ªù d√†nh cho c·∫≠u‚ú®...</p>
            </div>

            <div id="photo-game-section" style="display: none; margin-top: 30px;">
                <h2 style="color: #ffca3a;">üß© Z≈© tr·ª• c√≥ th·ª≠ th√°ch cho c·∫≠u</h2>
                <p>S·∫Øp x·∫øp theo m·ªëc th·ªùi gian <b>t·ª´ thu·ªü khai thi√™n l·∫≠p ƒë·ªãa ƒë·∫øn b√¢y gi·ªù nh√≥e</b>!</p>
                <div id="photo-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; max-width: 500px; margin: 30px auto;"></div>
                <p id="game-msg" style="font-weight: bold; color: #4cc9f0; min-height: 24px;"></p>
            </div>

            <div id="final-story" style="display: none;">
                <h1 style="font-size: 2rem; color: #45aff1;">C·ªï m√°y th·ªùi gian n√® NhuY_chan! ‚ú®</h1>
                
                <div class="story-item"><img src="https://i.postimg.cc/Lsv0wWZG/20112005.jpg" class="story-img"><p class="story-note">20_11_2005 ƒëo√°n coi n·ªØ ch√≠nh ·ªü ƒëou n√†o </p></div>
                <div class="story-item"><img src="https://i.postimg.cc/DfC40Pqv/11062016.jpg" class="story-img"><p class="story-note">11_06_2016 thay ƒë·ªïi ƒë·ªãa ƒëi·ªÉm ƒÉn c∆°m d·ª© th·ªãt mu·ªëi</p></div>
                <div class="story-item"><img src="https://i.postimg.cc/Dz5YHNXk/21122019.jpg" class="story-img"><p class="story-note">21_12_2019 c√≥ hai thi√™n th·∫ßn xu·∫•t hi·ªán trong ·∫£nh </p></div>
                <div class="story-item"><img src="https://i.postimg.cc/mrT5d4tx/15052020.jpg" class="story-img"><p class="story-note">16_5_2020 ·ªë l√† la g√©t g√¥ pagoda</p></div>
                <div class="story-item"><img src="https://i.postimg.cc/hGM36Ydf/30042021.jpg" class="story-img"><p class="story-note">30_04_2021 √¥i ng·ª´ ƒë√†n √¥ng ƒë·∫πp troai, c√≤n ng·ª´ k·∫ø b√™n th√¨ m·∫∑c ƒë·∫ßm tr·∫Øng </p></div>
                <div class="story-item"><img src="https://i.postimg.cc/hP4QrBJJ/02022022.jpg" class="story-img"><p class="story-note">02_02_2022 gi·ªëng ch·ªã em h∆°n c·∫£ ch·ªã em riu</p></div>
                <div class="story-item"><img src="https://i.postimg.cc/g04BQ7Zr/24052024.jpg" class="story-img"><p class="story-note">24_05_2024 √¥i ng·ª´ b√™n ph·∫£i th√¨ ƒë·∫πp trai, c√≤n ng∆∞·ªùi b√™n tr√°i th√¨ c·∫ßm t·∫•m b·∫±ng </p></div>
                <div class="story-item"><img src="https://i.postimg.cc/ZqJMfmCh/15092024.jpg" class="story-img"><p class="story-note">15_09_2024 t·∫øt Trung Thu em ƒë·ªët ƒë√®n ƒëi ch∆°i d·ª© traiii</p></div>
                <div class="story-item"><img src="https://i.postimg.cc/43wFq09X/24122025.jpg" class="story-img"><p class="story-note">24_12_2025 nguy·ªán s·ªëng ·∫£o ƒë·∫øn c√∫i ƒë·ªùiiii</p></div>
                
                <hr style="border: 0.5px solid #333; margin: 50px 0;">

                <h3>üéÅ L·ªùi ch√∫c t·ª´ m·ªçi ng∆∞·ªùi:</h3>
                <div class="gift-container">
                    <div class="gift-box" onclick="playAudio('audio0')"><img src="https://cdn-icons-png.flaticon.com/512/1139/1139982.png"><br>N·ªôi iu d·∫•u<audio id="audio0" src="noinoi.mp3"></audio></div>
                    <div class="gift-box" onclick="playAudio('audio1')"><img src="https://cdn-icons-png.flaticon.com/512/1139/1139982.png"><br>M·∫´u h·∫≠u<audio id="audio1" src="mama.mp3"></audio></div>
                    <div class="gift-box" onclick="playAudio('audio3')"><img src="https://cdn-icons-png.flaticon.com/512/1139/1139982.png"><br>Em trai y√™u d·∫•u<audio id="audio3" src="didi.mp3"></audio></div>
                    <div class="gift-box" onclick="playAudio('audio4')"><img src="https://cdn-icons-png.flaticon.com/512/1139/1139982.png"><br>Partner<audio id="audio4" src="partner.mp3"></audio></div>
                    <div class="gift-box" onclick="playAudio('audio5')"><img src="https://cdn-icons-png.flaticon.com/512/1139/1139982.png"><br>Ch√∫ng m√¨nh c√≥ nhau<audio id="audio5" src="banthan.mp3"></audio></div>
                </div>

                <div id="universe-section">
                    <h2 style="color: #f6b21f;">üå†Sao bƒÉng ƒëang l∆∞·ªõt qua, ch·∫ßn ch·ªù chi m√† h√¥ng ∆∞·ªõc!</h2>
                    <textarea id="wish-input" placeholder="Vi·∫øt l·∫π ƒëi..."></textarea><br>
                    <button class="send-btn" onclick="sendToUniverse()">G·ª¨I L√äN Z≈® TR·ª§</button>
                    <div id="reward-area" style="display: none; margin-top: 40px; border-top: 1px dashed rgba(255,255,255,0.3); padding-top: 20px;">
                       <p style="font-style: italic; color: #ffca3a;">"V≈© tr·ª• ch·ªçi cho c·∫≠u m·ªôt m√≥n qu√†..."</p>
                       <div class="mystery-container">
                       <div class="mystery-box" onclick="revealVoucher(1)">üéÅ</div>
                       <div class="mystery-box" onclick="revealVoucher(2)">üéÅ</div>
                       <div class="mystery-box" onclick="revealVoucher(3)">üéÅ</div>
                       </div>
    
                       <div id="voucher-result">
                       <h3 style="margin: 0; color: #f440d3;">TICKET TH√îNG H√ÄNH ‚ú®</h3>
                       <p id="voucher-text" style="font-weight: bold; font-size: 1.2rem; margin: 15px 0;"></p>
                       <p style="font-size: 0.8rem; color: #666;">* Ch·ª•p m√†n h√¨nh ƒë·ªÉ s·ª≠ d·ª•ng quy·ªÅn tr·ª£ gi√∫p n√†y nh√≥e!</p>
    
                       <button class="re-btn" onclick="showRetryQuestion()">ƒê·ªùi ng∆∞·ªùi c≈©ng c√≥ l√∫c ch·ªçn sai, l·∫°i khum b·∫°n</button>
                       </div>

                       <div id="retry-question-area">
                       <p id="question-text" style="color: #ffca3a; font-weight: bold;"></p>
                       <input type="text" id="retry-answer" placeholder="Nh·∫≠p ƒë√°p √°n v√†o ƒë√¢y...">
                       <button onclick="checkRetryAnswer()">Check var</button>
                       </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let retryCount = 0; // Bi·∫øn theo d√µi s·ªë l·∫ßn ch·ªçn l·∫°i
        const CHINH_XAC_NGAY = "06", CHINH_XAC_THANG = "02", CHINH_XAC_NAM = "2000", CORRECT_AGE = 26;
        function noOption() {
        alert("Nh·∫•n hay h√¥ng g√¨ c≈©ng p·∫£i tr·∫£ l·ªùi √† :P");
        showForm(); // G·ªçi h√†m hi·ªán Form x√°c minh
}

        function showForm() {
            document.getElementById('step1').style.display = 'none';
            document.getElementById('step2').style.display = 'block';
        }

        // Kh·ªüi t·∫°o ng√†y th√°ng nƒÉm
        window.onload = function() {
            const daySelect = document.getElementById('dob-day'), monthSelect = document.getElementById('dob-month'), yearSelect = document.getElementById('dob-year');
            for (let i = 1; i <= 31; i++) daySelect.options[daySelect.options.length] = new Option(i < 10 ? '0' + i : i, i < 10 ? '0' + i : i);
            for (let i = 1; i <= 12; i++) monthSelect.options[monthSelect.options.length] = new Option("Th√°ng " + i, i < 10 ? '0' + i : i);
            const currentYear = new Date().getFullYear();
            for (let i = currentYear; i >= 1950; i--) yearSelect.options[yearSelect.options.length] = new Option(i, i);
        };

        function checkValidation() {
            const d = document.getElementById('dob-day').value, m = document.getElementById('dob-month').value, y = document.getElementById('dob-year').value;
            const age = document.getElementById('input-age').value, thought = document.getElementById('input-thought').value;

            if (d !== CHINH_XAC_NGAY || m !== CHINH_XAC_THANG || y !== CHINH_XAC_NAM || parseInt(age) !== CORRECT_AGE) {
                document.getElementById('error-msg').innerText = "Sai g√≤i k√¨a, c√≥ thi·ªác s·ª± l√† th√¢n ch∆∞a?";
            } else if (thought.length < 70) {
                document.getElementById('error-msg').innerText = "Vi·∫øt th√™m " +(70 - thought.length) + " k√Ω t·ª± coi, ng√†y th∆∞·ªùng ch·ª≠i ng∆∞·ªùi nh∆∞ h√°t m√† :)))";
            } else {
                const bgMusic = document.getElementById('bg-music');
                bgMusic.volume = 0.5;
                bgMusic.play(); 
                document.getElementById('overlay').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
                
                const welcome = document.getElementById('welcome-screen');
                welcome.style.display = 'block';

                var duration = 5 * 1000, animationEnd = Date.now() + duration;
                var interval = setInterval(function() {
                    var timeLeft = animationEnd - Date.now();
                    if (timeLeft <= 0) return clearInterval(interval);
                    confetti({ particleCount: 50, origin: { x: Math.random(), y: Math.random() - 0.2 } });
                }, 250);

                setTimeout(() => {
                    welcome.style.opacity = '0';
                    welcome.style.transition = '2s';
                    setTimeout(() => {
                        welcome.style.display = 'none';
                        initPhotoGame();
                    }, 2000);
                }, 5000);
            }
        }

        function playAudio(id) {
    const bgMusic = document.getElementById('bg-music');
    const voice = document.getElementById(id);

    // Ki·ªÉm tra n·∫øu ƒëo·∫°n ghi √¢m n√†y ƒëang ph√°t
    if (!voice.paused) {
        voice.pause();          // D·ª´ng ghi √¢m ngay l·∫≠p t·ª©c
        voice.currentTime = 0;   // ƒê∆∞a th·ªùi gian v·ªÅ l·∫°i t·ª´ ƒë·∫ßu
        bgMusic.play();         // Ph√°t l·∫°i nh·∫°c n·ªÅn
    } else {
        // N·∫øu nh·∫•n v√†o m·ªôt h·ªôp qu√† kh√°c khi ƒëang c√≥ m·ªôt ghi √¢m kh√°c ƒëang ch·∫°y
        // D·ª´ng t·∫•t c·∫£ c√°c ghi √¢m ƒëang ph√°t tr∆∞·ªõc khi ph√°t c√°i m·ªõi
        document.querySelectorAll('audio').forEach(audio => {
            if (audio.id !== 'bg-music') {
                audio.pause();
                audio.currentTime = 0;
            }
        });

        bgMusic.pause(); // T·∫°m d·ª´ng nh·∫°c n·ªÅn
        voice.play();    // Ph√°t ghi √¢m m·ªõi
        
        // Khi ghi √¢m k·∫øt th√∫c t·ª± nhi√™n th√¨ b·∫≠t l·∫°i nh·∫°c n·ªÅn
        voice.onended = function() {
            bgMusic.play();
        };
    }
}

        function sendToUniverse() {
    const wish = document.getElementById('wish-input').value;
    const btn = document.querySelector('.send-btn');

    if (wish.length < 3) {
        alert("H√£y vi·∫øt ƒëi·ªÅu g√¨ ƒë√≥ th·∫≠t √Ω nghƒ©a nh√©!");
        return;
    }

    // ƒê·ªïi tr·∫°ng th√°i n√∫t ƒë·ªÉ ng∆∞·ªùi d√πng bi·∫øt ƒëang g·ª≠i
    btn.innerText = "ƒêANG G·ª¨I...";
    btn.disabled = true;

    // C√°c th√¥ng s·ªë t·ª´ EmailJS
    const serviceID = 'nguiine'; // Thay b·∫±ng Service ID c·ªßa b·∫°n
    const templateID = 'template_bn5voni'; // Thay b·∫±ng Template ID c·ªßa b·∫°n

    const templateParams = {
        message: wish,
        to_name: "Ch·ªß nh√¢n trang web" 
    };

    emailjs.send(serviceID, templateID, templateParams)
        .then(function() {
    alert("‚ú® Nguy·ªán v·ªçng c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c g·ª≠i l√™n v≈© tr·ª• ‚ú®");
    document.getElementById('wish-input').style.display = 'none'; // ·∫®n √¥ nh·∫≠p
    btn.style.display = 'none'; // ·∫®n n√∫t g·ª≠i
    
    // Hi·ªán khu v·ª±c qu√† t·∫∑ng
    document.getElementById('reward-area').style.display = 'block';
    
    confetti({ particleCount: 100, spread: 70, origin: { y: 0.9 } })  ;})
}
        // --- MINI GAME LOGIC ---
        const originalPhotos = [
            { id: 1, src: "https://i.postimg.cc/Lsv0wWZG/20112005.jpg" },
            { id: 2, src: "https://i.postimg.cc/DfC40Pqv/11062016.jpg" },
            { id: 3, src: "https://i.postimg.cc/Dz5YHNXk/21122019.jpg" },
            { id: 4, src: "https://i.postimg.cc/mrT5d4tx/15052020.jpg" },
            { id: 5, src: "https://i.postimg.cc/hGM36Ydf/30042021.jpg" },
            { id: 6, src: "https://i.postimg.cc/hP4QrBJJ/02022022.jpg" },
            { id: 7, src: "https://i.postimg.cc/g04BQ7Zr/24052024.jpg" },
            { id: 8, src: "https://i.postimg.cc/ZqJMfmCh/15092024.jpg" },
            { id: 9, src: "https://i.postimg.cc/43wFq09X/24122025.jpg" }
        ];
        let nextExpectedId = 1;

        function initPhotoGame() {
            const photoGrid = document.getElementById('photo-grid');
            document.getElementById('photo-game-section').style.display = 'block';
            photoGrid.innerHTML = '';
            const shuffled = [...originalPhotos].sort(() => Math.random() - 0.5);
            shuffled.forEach(photo => {
                const img = document.createElement('img');
                img.src = photo.src;
                img.style = "width:100%; height:150px; object-fit:cover; border-radius:10px; cursor:pointer; border:3px solid transparent; transition:0.3s;";
                img.onclick = () => {
                    if (photo.id === nextExpectedId) {
                        img.style.borderColor = "#4ffb4f"; img.style.opacity = "0.5"; img.style.pointerEvents = "none";
                        nextExpectedId++;
                        if (nextExpectedId > 9) {
                            setTimeout(() => {
                                document.getElementById('photo-game-section').style.display = 'none';
                                document.getElementById('final-story').style.display = 'block';
                                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                            }, 1000);
                        }
                    } else {
                        document.getElementById('game-msg').innerText = "ƒÇn bao nhiu b·ªôt ng·ªçt g√≤i h·∫£???";
                        setTimeout(() => { nextExpectedId = 1; initPhotoGame(); document.getElementById('game-msg').innerText = ""; }, 1000);
                    }
                };
                photoGrid.appendChild(img);
            });
        }

        window.addEventListener('scroll', () => {
            document.querySelectorAll('.story-item').forEach(item => {
                if (item.getBoundingClientRect().top < window.innerHeight - 100) item.classList.add('show');
            });
        });
        // --- HI·ªÜU ·ª®NG STARFIELD ---
const canvas = document.getElementById('starfield');
const ctx = canvas.getContext('2d');

let stars = [];
const numStars = 400;

function initStars() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight; // Lu√¥n theo khung h√¨nh ng∆∞·ªùi xem
    
    stars = [];
    for (let i = 0; i < numStars; i++) {
        stars.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            size: Math.random() * 3 + 1,
            speed: Math.random() * 0.2 + 0.05, // T·ªëc ƒë·ªô ch·∫≠m cho chill
            opacity: Math.random(),
            type: Math.floor(Math.random() * 3) // 0: tr√≤n, 1: d·∫πp, 2: sao 5 c√°nh
        });
    }
}

function drawStars() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    stars.forEach(star => {
        ctx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
        ctx.beginPath();
        
        if (star.type === 0) {
            // H√¨nh tr√≤n
            ctx.arc(star.x, star.y, star.size / 2, 0, Math.PI * 2);
        } 
        else if (star.type === 1) {
            // H√¨nh d·∫πp (Ellipse)
            ctx.ellipse(star.x, star.y, star.size, star.size / 3, Math.random() * Math.PI, 0, Math.PI * 2);
        } 
        else {
            // H√¨nh ng√¥i sao 5 c√°nh
            drawStarShape(star.x, star.y, 5, star.size, star.size / 2);
        }
        
        ctx.fill();
        
        // Di chuy·ªÉn
        star.y -= star.speed;
        if (star.y < 0) star.y = canvas.height;
        
        // Hi·ªáu ·ª©ng nh·∫•p nh√°y
        star.opacity += (Math.random() - 0.5) * 0.05;
        if (star.opacity < 0.1) star.opacity = 0.1;
        if (star.opacity > 1) star.opacity = 1;
    });
    requestAnimationFrame(drawStars);
}

// H√†m ph·ª• ƒë·ªÉ v·∫Ω ƒëa gi√°c h√¨nh sao
function drawStarShape(cx, cy, spikes, outerRadius, innerRadius) {
    let rot = Math.PI / 2 * 3;
    let x = cx;
    let y = cy;
    let step = Math.PI / spikes;

    ctx.moveTo(cx, cy - outerRadius);
    for (let i = 0; i < spikes; i++) {
        x = cx + Math.cos(rot) * outerRadius;
        y = cy + Math.sin(rot) * outerRadius;
        ctx.lineTo(x, y);
        rot += step;

        x = cx + Math.cos(rot) * innerRadius;
        y = cy + Math.sin(rot) * innerRadius;
        ctx.lineTo(x, y);
        rot += step;
    }
    ctx.lineTo(cx, cy - outerRadius);
    ctx.closePath();
}
// L·∫Øng nghe s·ª± ki·ªán thay ƒë·ªïi k√≠ch th∆∞·ªõc m√†n h√¨nh
window.addEventListener('resize', initStars);
// Ch·∫°y kh·ªüi t·∫°o
initStars();
drawStars();
function revealVoucher(choice) {
    const vouchers = [
        "VOUCHER: Z≈© tr·ª• l·∫•y ƒëi b·∫°n 100k üé´",
        "VOUCHER: M·ªôt m·ªëc kh√≥a cute h·ªôt me üéÅ",
        "VOUCHER: H√°p py b·ªõt ƒë√™ tu u ‚ú®"
    ];
    
    const randomVoucher = vouchers[Math.floor(Math.random() * vouchers.length)];
    const resultDiv = document.getElementById('voucher-result');
    const textP = document.getElementById('voucher-text');
    const retryBtn = document.querySelector('.re-btn');
    
    document.querySelector('.mystery-container').style.display = 'none';
    textP.innerText = randomVoucher;
    resultDiv.style.display = 'block';

    // KI·ªÇM TRA: N·∫øu ƒë√£ ch·ªçn l·∫°i 1 l·∫ßn r·ªìi th√¨ ·∫©n n√∫t ch·ªçn l·∫°i ƒëi
    if (retryCount >= 1) {
        retryBtn.style.display = 'none';
    } else {
        retryBtn.style.display = 'inline-block';
    }
    
    confetti({ particleCount: 50, scalar: 2, emojis: ['üé´', '‚ú®'] });
}
// C·∫•u h√¨nh c√¢u h·ªèi ph·ª•
const EXTRA_QUESTION = {
    q: `C√¢u h·ªèi: Theo b·∫£n v·∫Ω, ƒë√¥i nh·∫´n s·∫Ω ti√™u t·ªën 2 ch·ªâ v√†ng 24K nguy√™n li·ªáu.
     Tuy nhi√™n, trong ng√†nh kim ho√†n, qu√° tr√¨nh ch·∫ø t√°c (m√†i, c·∫Øt, ƒë√°nh b√≥ng) 
     lu√¥n c√≥ m·ªôt l∆∞·ª£ng v√†ng nh·ªè b·ªã v·ª•n ra th√†nh b·ª•i kh√¥ng th·ªÉ thu h·ªìi ngay l·∫≠p t·ª©c, g·ªçi l√† hao h·ª•t (hay ti·ªÅn D√¥i). 
     Ti·ªám c·ªßa b·∫°n quy ƒë·ªãnh m·ª©c hao h·ª•t n√†y l√† 3% tr√™n t·ªïng l∆∞·ª£ng v√†ng s·ª≠ d·ª•ng.
     ƒê·ªÉ ho√†n thi·ªán ƒë√¥i nh·∫´n tinh x·∫£o n√†y, ti·ªÅn c√¥ng th·ª£ v√† chi ph√≠ m√°y m√≥c ƒë∆∞·ª£c ti·ªám ni√™m y·∫øt l√† 800.000 VNƒê/c·∫∑p.
     T·∫°i th·ªùi ƒëi·ªÉm kh√°ch ch·ªët ƒë∆°n, gi√° v√†ng b√°n ra c·ªßa ti·ªám ƒëang l√† 17.650.000 VNƒê/ch·ªâ. 
     H√£y t√≠nh to√°n v√† b√°o gi√° cho kh√°ch h√†ng ƒë·∫∑t m·ªôt ƒë√¥i nh·∫´n c∆∞·ªõi n√†y.`,
    a: "37.159.000" // Thay ƒë√°p √°n ƒë√∫ng c·ªßa b·∫°n v√†o ƒë√¢y (n√™n vi·∫øt th∆∞·ªùng, kh√¥ng d·∫•u ƒë·ªÉ tr√°nh l·ªói nh·∫≠p li·ªáu)
};

function showRetryQuestion() {
    // ·∫®n c√°i v√© hi·ªán t·∫°i
    document.getElementById('voucher-result').style.display = 'none';
    // Hi·ªán khu v·ª±c c√¢u h·ªèi
    document.getElementById('retry-question-area').style.display = 'block';
    document.getElementById('question-text').innerText = EXTRA_QUESTION.q;
}
function checkRetryAnswer() {
    const input = document.getElementById('retry-answer');
    const userAnswer = input.value.toLowerCase().trim();
    
    if (userAnswer === EXTRA_QUESTION.a) {
        // --- TH√äM D√íNG N√ÄY ---
        retryCount++; 
        // ----------------------

        alert("Ti·ªát z·ªùi, m·ª´ ƒëi·ªÉm, cho ch·ªçn l·∫°i l·∫ßn c√∫i ƒë√≥!");
        document.getElementById('retry-question-area').style.display = 'none';
        document.getElementById('retry-answer').value = "";
        
        // Quan tr·ªçng: Ph·∫£i ·∫©n c√°i k·∫øt qu·∫£ c≈© ƒëi ƒë·ªÉ ch·ªçn m·ªõi
        document.getElementById('voucher-result').style.display = 'none'; 
        
        document.querySelector('.mystery-container').style.display = 'flex';
        confetti({ particleCount: 40, spread: 50 });
    } else {
        input.classList.add('shake');
        setTimeout(() => input.classList.remove('shake'), 500);
        alert("G√† qu√°, l·∫°i coyyy");
        input.value = "";
        input.focus();
    }
}
    </script>
</body>

</html>

